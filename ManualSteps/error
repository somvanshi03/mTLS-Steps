# Get the pod name
POD=$(kubectl get pods -n flows-pen-test -l app=haproxy-egress -o jsonpath='{.items[0].metadata.name}')

# Check the CA bundle content
kubectl exec -it $POD -n flows-pen-test -- cat /etc/mtls/visa-ca-bundle.crt

kubectl exec -it $POD -n flows-pen-test -- cat /etc/mtls/visa-client-combined.pem | head -20

# Decode the CA bundle from the secret
kubectl get secret -n flows-pen-test haproxy-mtls-secret -o jsonpath='{.data.visa-ca-bundle\.crt}' | base64 -d | head -20

# Decode the client certificate
kubectl get secret -n flows-pen-test haproxy-mtls-secret -o jsonpath='{.data.visa-client-combined\.pem}' | base64 -d | head -20

